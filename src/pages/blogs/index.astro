---
import DefaultLayout from "@/layouts/default.astro";
import fetchApi from "/lib/strapi";
import type Blog from "/interfaces/blog";
import BlogListItem from "@/components/BlogListItem.astro";
import { SITE } from "@/site-config";

const blogs = await fetchApi<Blog[]>({
    endpoint: "posts",
    wrappedByKey: "data",
    query: {
        fields: ["title", "createdAt", "slug"],
        populate: {
            tags: {
                fields: ["name"],
            },
            hero_image: {
                fields: [
                    "url",
                    "width",
                    "height",
                    "alternativeText",
                    "formats",
                ],
            },
        },
    },
});
---

<DefaultLayout seo={{
    title: 'Home',
    description: SITE.description,
}}>
    {blogs.map((blog) => <BlogListItem blog={blog} />)}
</DefaultLayout>
